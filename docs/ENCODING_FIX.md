# Исправление проблем с кодировкой

## Проблема
При экспорте PDF и JSON на мобильных устройствах (особенно в Telegram) отображался зашифрованный/искаженный текст вместо нормальной кириллицы.

## Исправления

### 1. PDF экспорт (`src/utils/exportPDF.ts`)
- **Изменен шрифт**: с `Helvetica` на `TimesRoman` для лучшей поддержки символов
- **Добавлена очистка текста**: нормализация Unicode и замена проблемных символов
- **Улучшен fallback**: при ошибках используется ASCII-совместимый текст
- **Обновлен HTML**: добавлены мета-теги и улучшены стили для печати

### 2. JSON экспорт
- **Нормализация строк**: все строки проходят через `normalize('NFC')`
- **UTF-8 BOM**: добавлен Byte Order Mark для лучшей совместимости
- **Правильный MIME-type**: `application/json;charset=utf-8`

### 3. Текстовый экспорт (fallback)
- **UTF-8 BOM**: добавлен для всех текстовых файлов
- **Нормализация**: весь контент нормализуется
- **Правильная кодировка**: `text/plain;charset=utf-8`

### 4. Функция загрузки файлов
- **Автоматическая кодировка**: для текстовых файлов автоматически добавляется `;charset=utf-8`
- **Совместимость с Telegram WebApp**: специальная обработка для мобильных устройств

## Результат
- ✅ Кириллица корректно отображается в PDF
- ✅ JSON файлы читаются без проблем
- ✅ Работает одинаково на компьютере и телефоне
- ✅ Совместимость с Telegram WebApp

## Деплой
После пуша изменений в репозиторий Railway автоматически обновит приложение.
